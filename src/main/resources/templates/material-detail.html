<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>零件详细信息</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">零件详细信息</h2>
        
        <div class="card mb-4">
            <div class="card-header">基本信息</div>
            <div class="card-body">
                <dl class="row">
                    <dt class="col-sm-3">零件编号</dt>
                    <dd class="col-sm-9" th:text="${material.materialCode}"></dd>
                    
                    <dt class="col-sm-3">零件名称</dt>
                    <dd class="col-sm-9" th:text="${material.materialName}"></dd>
                    
                    <dt class="col-sm-3">规格型号</dt>
                    <dd class="col-sm-9" th:text="${material.specification ?: '-'}"></dd>
                    
                    <dt class="col-sm-3">单位</dt>
                    <dd class="col-sm-9" th:text="${material.unit}"></dd>

                    <dt class="col-sm-3">物料编码</dt>
                    <dd class="col-sm-9" th:text="${material.barcode ?: '-'}"></dd>

                    <dt class="col-sm-3">供应商</dt>
                    <dd class="col-sm-9" th:text="${material.supplier ?: '-'}"></dd>
                    
                    <dt class="col-sm-3">默认仓库</dt>
                    <dd class="col-sm-9" th:text="${defaultWarehouseName ?: '-'}"></dd>
                    
                    <dt class="col-sm-3">当前库存</dt>
                    <dd class="col-sm-9" th:text="${currentStock ?: '0'}"></dd>

                    <dt class="col-sm-3">所属分类</dt>
                    <dd class="col-sm-9" th:text="${categoryName ?: '-'}"></dd>
                    
                    <dt class="col-sm-3">状态</dt>
                    <dd class="col-sm-9">
                        <span class="badge bg-success" th:if="${material.status == null or material.status == '启用'}">启用</span>
                        <span class="badge bg-secondary" th:unless="${material.status == null or material.status == '启用'}" 
                              th:text="${material.status ?: '未知'}"></span>
                    </dd>
                </dl>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">出入库记录</div>
            <div class="card-body">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>记录类型</th>
                            <th>数量</th>
                            <th>操作人</th>
                            <th>时间</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:if="${inventoryTransactions == null or #lists.isEmpty(inventoryTransactions)}">
                            <td colspan="4" class="text-center">暂无出入库记录</td>
                        </tr>
                        <tr th:each="record : ${inventoryTransactions}">
                            <td>
                                <span th:if="${record.transactionType != null and record.transactionType.direction == 'IN'}" class="badge bg-success">入库</span>
                                <span th:if="${record.transactionType != null and record.transactionType.direction == 'OUT'}" class="badge bg-danger">出库</span>
                            </td>
                            <td th:text="${record.quantity}"></td>
                            <td th:text="${record.createdBy ?: '-'}"></td>
                            <td th:text="${record.transactionTime != null ? #temporals.format(record.transactionTime, 'yyyy-MM-dd HH:mm:ss') : '-'}"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="mt-3">
            <a href="/parts-query" class="btn btn-secondary">返回零件查询</a>
        </div>
    </div>
</body>
</html>